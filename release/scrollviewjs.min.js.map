{"version":3,"sources":["scrollviewjs.min.js"],"names":["root","factory","define","amd","ScrollViewJS","module","exports","this","addVendorPrefix","property","capitalise","string","charAt","toUpperCase","slice","index","prefs","$div","document","createElement","result","toLowerCase","arrayOfPrefixes","length","push","undefined","style","mix","old","newMixin","attr","hasOwnProperty","PointerWrapper","element","listener","context","_isDown","_chancelId","_tracks","_tmpEvent","_trackEvents","isTouched","TRACK_TOUCH_EVENTS","TRACK_EVENTS","attach","_listener","notify","event","handleEvent","apply","ScrollBar","container","options","className","direction","_container","_bar","position","opacity","appendChild","_containerSize","_position","_max","_translateArray","_window","Date","now","window","performance","webkitNow","mozNow","msNow","oNow","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","currTime","timeToCall","Math","max","id","setTimeout","clearTimeout","prototype","touchstart","touchmove","touchend","touchleave","touchcancel","mousedown","mousemove","mouseup","mouseover","mouseout","FIRE_EVENTS","up","down","move","over","chancel","fling","longtap","tap","device","desktop","catchFirstEvent","detach","_catch","_el","addEventListener","removeEventListener","destroy","type","_pointerDown","_fireEvent","pointerTracker","start","clientX","clientY","timeStamp","pre","last","end","_pointerMove","_pointerUp","distance","x1","x2","y1","y2","pow","isMoved","isFling","pointer","abs","speedX","speedY","i","l","touchEvent","touches","touchID","identifier","changedTouches","screenX","screenY","pointerType","target","currentTarget","preventDefault","stopPropagation","_transformName","_transitionName","setPosition","join","refresh","bar","height","offsetHeight","width","offsetWidth","validPosition","tmpVar","scrollView","_options","preventMove","resizeEvent","scroll","bounds","marginMIN","marginMAX","onScroll","shift","console","dir","onScrollBefore","onScrollAfter","onScrollTypeChange","_transitionArray","_coordName","_speedName","_animParams","_RafID","_lastPointerPosition","_shift","_motionType","_lastMotionType","_STRINGS","stop","_isMoved","_tmp","easing","velocity","_pos","_root","_wrapper","firstElementChild","indexOf","getComputedStyle","overflow","margin","TRACKING_EVENTS","resize","_animationStep","timestamp","_calculateShift","tweak","_min","_margine","checkTweak","round","startTime","a","ceil","duration","easeFunc","lastShift","isNaN","_eventPointerDown","_eventPointerMove","_eventPointerUp","_eventFling","V","preventDefaultTags","time","rootWidth","rootHeight","clientHeight","clientWidth","newShift","newPos","newDuration","self","test","_resizeID"],"mappings":"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","file":"scrollviewjs.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return (root.ScrollViewJS = factory());\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = (root.ScrollViewJS = factory());\n  } else {\n    root.ScrollViewJS = factory();\n  }\n}(this, function () {\n  'use strict';\n\n/**\n * Add vendor prefix\n * @param {string} property\n * @return {string}\n */\nfunction addVendorPrefix(property) {\n  var prefs = ['webkit', 'moz', 'ms', 'o'], index, $div = document.createElement('div'),\n    result = property.toLowerCase(), arrayOfPrefixes = [];\n\n  function capitalise(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  for (index = 0; index < prefs.length; index += 1) {\n    arrayOfPrefixes.push(prefs[index] + capitalise(property));\n  }\n  for (index = 0; index < arrayOfPrefixes.length; index += 1) {\n    if ($div.style[arrayOfPrefixes[index]] !== undefined) {\n      result = '-' + prefs[index] + '-' + property;\n      break;\n    }\n  }\n  return result;\n}\n/**\n * Extend first on object with second\n * @param {Object} old\n * @param {Object} newMixin\n * @return {Object}\n */\nfunction mix(old, newMixin) {\n  var attr;\n  for (attr in newMixin) {\n    if (newMixin.hasOwnProperty(attr)) {\n      old[attr] = newMixin[attr];\n    }\n  }\n  return old;\n}\n\n(function (_window) {\n  _window.Date.now || (_window.Date.now = function () {\n    return +new Date;\n  });\n})(window);\n\n(function (_window) {\n  _window.performance || (_window.performance = {});\n  _window.performance.now && (_window.performance.now = performance.webkitNow || performance.mozNow || performance.msNow ||\n    performance.oNow || function () {\n      return Date.now()\n    })\n})(window);\n\n(function (_window) {\n  var lastTime = 0;\n  var vendors = ['webkit', 'moz', 'ms', 'o'];\n  for (var x = 0; x < vendors.length && !_window.requestAnimationFrame; ++x) {\n    _window.requestAnimationFrame = _window[vendors[x] + 'RequestAnimationFrame'];\n    _window.cancelAnimationFrame = _window[vendors[x] + 'CancelAnimationFrame']\n      || _window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n  _window.requestAnimationFrame || (_window.requestAnimationFrame = function (callback) {\n    var currTime = Date.now();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = _window.setTimeout(function () {\n        callback(currTime + timeToCall)\n      },\n      timeToCall);\n    lastTime = currTime + timeToCall;\n    return id\n  });\n  _window.cancelAnimationFrame || (_window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  });\n}(window));\n\n/**\n * Provide point events for DOM elements\n * @param {Element} element\n * @param {Object} listener\n * @param {Object=} context\n * @constructor\n */\nfunction PointerWrapper(element, listener, context) {\n  this._isDown = false;\n  this._chancelId = false;\n  this._tracks = {};\n  this._tmpEvent = {};\n  if (this.isTouched) {\n    this._trackEvents = this.TRACK_TOUCH_EVENTS;\n  } else {\n    this._trackEvents = this.TRACK_EVENTS;\n  }\n  this.attach(element);\n  this._listener = listener;\n  if (typeof listener === 'object') {\n    this.notify = function (event) {\n      this._listener.handleEvent(event);\n    };\n  } else if (typeof context === 'object') {\n    this.notify = function (event) {\n      this._listener.apply(context, [event]);\n    };\n  } else {\n    this.notify = function (event) {\n      this._listener(event);\n    };\n  }\n}\nPointerWrapper.prototype = {\n  TRACK_TOUCH_EVENTS: {\n    touchstart: 'touchstart',\n    touchmove: 'touchmove',\n    touchend: 'touchend',\n    touchleave: 'touchleave',\n    touchcancel: '.touchcancel'\n  },\n  TRACK_EVENTS: {\n    mousedown: 'mousedown',\n    mousemove: 'mousemove',\n    mouseup: 'mouseup',\n    mouseover: 'mouseover',\n    mouseout: 'mouseout'\n  },\n  FIRE_EVENTS: {\n    up: 'pointerup',\n    down: 'pointerdown',\n    move: 'pointermove',\n    over: 'pointerover',\n    chancel: 'pointercancel',\n    fling: 'fling',\n    longtap: 'longtap',\n    tap: 'tap'\n  },\n  /**\n   * @type {boolean}\n   */\n  isTouched: !window.device.desktop(),\n  /**\n   * @public\n   */\n  attach: function (element, catchFirstEvent) {\n    var old = this.detach(), attr;\n    this._catch = !!catchFirstEvent;\n    if (element) {\n      this._el = element;\n      for (attr in this._trackEvents) {\n        if (this._trackEvents.hasOwnProperty(attr)) {\n          this._el.addEventListener(this._trackEvents[attr], this, false);\n        }\n      }\n    }\n    return old;\n  },\n  /**\n   * @public\n   */\n  detach: function () {\n    var old = this._el, attr;\n    if (old) {\n      for (attr in this._trackEvents) {\n        if (this._trackEvents.hasOwnProperty(attr)) {\n          this._el.removeEventListener(this._trackEvents[attr], this);\n        }\n      }\n    }\n    this._el = null;\n  },\n  /**\n   * @public\n   */\n  destroy: function () {\n    this.detach();\n    this._listener = null;\n    this._tmpEvent = null;\n  },\n  /**\n   * @public\n   */\n  handleEvent: function (event) {\n    if (this._chancelId !== null) {\n      clearTimeout(this._chancelId);\n    }\n    if (this._catch) {\n      switch (event.type) {\n        case this.TRACK_TOUCH_EVENTS.touchstart:\n        case this.TRACK_EVENTS.mousedown:\n          break;\n        default:\n          this._isDown = true;\n          this._chancelId = false;\n          this._pointerDown(event);\n          break;\n      }\n      this._catch = false;\n    }\n    switch (event.type) {\n      case this.TRACK_TOUCH_EVENTS.touchmove:\n      case this.TRACK_EVENTS.mousemove:\n        if (this._isDown) {\n          this._fireEvent(this.FIRE_EVENTS.move, event);\n        }\n        break;\n      case this.TRACK_TOUCH_EVENTS.touchstart:\n      case this.TRACK_EVENTS.mousedown:\n        this._isDown = true;\n        this._chancelId = false;\n        this._fireEvent(this.FIRE_EVENTS.down, event);\n        break;\n      case this.TRACK_TOUCH_EVENTS.touchend:\n      case this.TRACK_TOUCH_EVENTS.touchleave:\n      case this.TRACK_TOUCH_EVENTS.touchcancel:\n      case this.TRACK_EVENTS.mouseup:\n        if (this._isDown) {\n          this._isDown = false;\n          this._fireEvent(this.FIRE_EVENTS.up, event);\n        }\n        break;\n      case this.TRACK_EVENTS.mouseover:\n        if (this._isDown) {\n          this._fireEvent(this.FIRE_EVENTS.over, event);\n        }\n        break;\n      case this.TRACK_EVENTS.mouseout:\n        var pointerTracker = this;\n        if (this._isDown) {\n          this._chancelId = setTimeout(function () {\n            pointerTracker._isDown = false;\n            pointerTracker._fireEvent(pointerTracker.FIRE_EVENTS.chancel, event);\n            pointerTracker._chancelId = null;\n          }, 10);\n        }\n        break;\n    }\n  },\n  /**\n   * @private\n   */\n  _pointerDown: function (event) {\n    this._tracks = {\n      start: {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        timeStamp: event.timeStamp\n      },\n      pre: {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        timeStamp: event.timeStamp\n      },\n      last: {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        timeStamp: event.timeStamp\n      },\n      end: {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        timeStamp: event.timeStamp\n      }\n    };\n  },\n  /**\n   * @private\n   */\n  _pointerMove: function (event) {\n    if (event.timeStamp - this._tracks.last.timeStamp > 10) {\n      this._tracks.pre.clientX = this._tracks.last.clientX;\n      this._tracks.pre.clientY = this._tracks.last.clientY;\n      this._tracks.pre.timeStamp = this._tracks.last.timeStamp;\n      this._tracks.last.clientX = event.clientX;\n      this._tracks.last.clientY = event.clientY;\n      this._tracks.last.timeStamp = event.timeStamp;\n    }\n  },\n  /**\n   *\n   * @param {Event} event\n   * @private\n   */\n  _pointerUp: function (event) {\n    var isMoved, isFling, pointer = this._tracks;\n    this._tracks.end.clientX = event.clientX;\n    this._tracks.end.clientY = event.clientY;\n    this._tracks.end.timeStamp = event.timeStamp;\n    function distance(x1, x2, y1, y2) {\n      return Math.pow(((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)), 0.5);\n    }\n\n    isMoved = Math.abs(\n        distance(pointer.start.clientX, pointer.end.clientX, pointer.start.clientY, pointer.end.clientY)) > 10;\n    isFling = Math.abs(\n        distance(pointer.end.clientX, pointer.pre.clientX, pointer.end.clientY, pointer.pre.clientY)) > 0;\n    if (isFling) {\n      this._tmpEvent.type = this.FIRE_EVENTS.fling;\n      this._tmpEvent.start = pointer.start;\n      this._tmpEvent.end = pointer.end;\n      this._tmpEvent.speedX =\n        (pointer.end.clientX - pointer.pre.clientX) / (pointer.end.timeStamp - pointer.pre.timeStamp);\n      this._tmpEvent.speedY =\n        (pointer.end.clientY - pointer.pre.clientY) / (pointer.end.timeStamp - pointer.pre.timeStamp);\n      this.notify(this._tmpEvent);\n    } else if (!isMoved) {\n      if (pointer.end.timeStamp - pointer.start.timeStamp > 300) {\n        this._tmpEvent.type = this.FIRE_EVENTS.longtap;\n        this.notify(this._tmpEvent);\n      } else {\n        this._tmpEvent.type = this.FIRE_EVENTS.tap;\n        this.notify(this._tmpEvent);\n      }\n    }\n    this._tracks = null;\n  },\n  /**\n   * @private\n   */\n  _fireEvent: function (type, event) {\n    var touchEvent = event, i, l;\n    // Get coordinates\n    if (this.isTouched) {\n      if (event.type === this.TRACK_TOUCH_EVENTS.touchstart) {\n        if (event.touches.length > 1) {\n          return;\n        }\n        touchEvent = event.touches[0];\n        this.touchID = event.touches[0].identifier;\n      } else {\n        if (!this.touchID) {\n          this.touchID = event.changedTouches[0].identifier;\n        }\n        for (i = 0, l = event.changedTouches.length; i < l; i += 1) {\n          touchEvent = event.changedTouches[i];\n          if (touchEvent.identifier === this.touchID) {\n            break;\n          }\n        }\n        if (touchEvent.identifier !== this.touchID) {\n          return;\n        }\n      }\n    } else {\n      this.touchID = 1; // Mouse\n    }\n    // Custom event\n    this._tmpEvent.type = type;\n    this._tmpEvent.start = null;\n    this._tmpEvent.end = null;\n    this._tmpEvent.speedX = null;\n    this._tmpEvent.speedY = null;\n    this._tmpEvent.screenX = touchEvent.screenX;\n    this._tmpEvent.screenY = touchEvent.screenY;\n    this._tmpEvent.clientX = touchEvent.clientX;\n    this._tmpEvent.clientY = touchEvent.clientY;\n    this._tmpEvent.pointerType = this.isTouched ? 'touch' : 'mouse';\n    this._tmpEvent.target = event.target;\n    this._tmpEvent.currentTarget = event.currentTarget;\n    this._tmpEvent.timeStamp = event.timeStamp;\n    this._tmpEvent.preventDefault = function () {\n      if (event.preventDefault !== undefined) {\n        event.preventDefault();\n      }\n    };\n    this._tmpEvent.stopPropagation = function () {\n      if (event.stopPropagation !== undefined) {\n        event.stopPropagation();\n      }\n    };\n    // Fire custom event\n    this.notify(this._tmpEvent);\n    // Save data for gesture and check\n    switch (type) {\n      case this.FIRE_EVENTS.down:\n        this._pointerDown(this._tmpEvent);\n        break;\n      case this.FIRE_EVENTS.move:\n        this._pointerMove(this._tmpEvent);\n        break;\n      case this.FIRE_EVENTS.chancel:\n      case this.FIRE_EVENTS.up:\n        this._pointerUp(this._tmpEvent);\n        break;\n    }\n  }\n};\n\n/**\n * Scrollbar for view\n * @param {HTMLElement} container\n * @param {Object} options\n * @constructor\n */\nfunction ScrollBar(container, options) {\n  options = mix({\n    className: 'scrollbar',\n    direction: 'vertical'\n  }, options);\n  this.direction = options.direction;\n  this._container = container;\n  this._bar = document.createElement('div');\n  this._bar.style.position = 'absolute';\n  this._bar.className = options.className;\n  this._bar.style.opacity = 0;\n  this._container.appendChild(this._bar);\n  this._containerSize = 0;\n  this._position = 0;\n  this._max = 0;\n  this._translateArray = this.direction === 'vertical' ? ['translate3d(0, ', 0, 'px, 0)'] : ['translate3d(', 0, 'px, 0, 0)'];\n}\nScrollBar.prototype = {\n  /**\n   * @private\n   */\n  _transformName: addVendorPrefix('transform'),\n  /**\n   * @private\n   */\n  _transitionName: addVendorPrefix('transition'),\n  /**\n   * @public\n   */\n  setPosition: function (position) {\n    this._position = position;\n    this._translateArray[1] = -position * this._containerSize / this._max;\n    if (this._translateArray[1] <= 0) {\n      this._translateArray[1] = 0;\n    } else if (this._translateArray[1] >= this._containerSize) {\n      this._translateArray[1] = this._containerSize;\n    }\n    this._bar.style[this._transformName] = this._translateArray.join('');\n  },\n  /**\n   * @public\n   */\n  refresh: function (max) {\n    var bar = this;\n    this._max = max;\n    if (Math.max(0, max) === 0) {\n      this._bar.style.opacity = 0;\n    } else {\n      this._bar.style.opacity = 1;\n    }\n    if (this.direction === 'vertical') {\n      this._bar.style.height = this._container.offsetHeight * (this._container.offsetHeight / (max + this._container.offsetHeight)) + 'px';\n      this._containerSize = this._container.offsetHeight - this._bar.offsetHeight;\n    } else {\n      this._bar.style.width = this._container.offsetWidth * (this._container.offsetWidth / (max + this._container.offsetWidth)) + 'px';\n      this._containerSize = this._container.offsetWidth - this._bar.offsetWidth;\n    }\n    this._bar.style[this._transitionName] = 'transform 300ms';\n    this.setPosition(this._position);\n    setTimeout(function () {\n      bar._bar.style[bar._transitionName] = 'transform 0ms';\n    }, 350);\n  }\n};\n\nvar ScrollViewJS = (function () {\n  /**\n   * Scroll wrapper with additional features\n   * @param {HTMLElement} element\n   * @param {Object} options - options for current instance of scrollview\n   * @extends {EventListener}\n   * @constructor\n   */\n  function ScrollViewJS(element, options) {\n    var scrollView = this, validPosition, tmpVar, event;\n    this._options = mix({\n      preventMove: true,\n      resizeEvent: true,\n      scroll: true,\n      bounds: false,\n      direction: 'vertical',\n      marginMIN: 0,\n      marginMAX: 0,\n      onScroll: function (shift) {\n        console.dir(shift);\n      },\n      onScrollBefore: function (shift) {\n        console.dir(shift);\n        return true;\n      },\n      onScrollAfter: function () {\n      },\n      onScrollTypeChange: function (type) {\n      }\n    }, options);\n    // Initialize inner variables on creation\n    if (this._options.direction === 'vertical') {\n      this._transitionArray = ['translate3d(0, ', 0, 'px, 0)'];\n      this._coordName = 'screenY';\n      this._speedName = 'speedY';\n    } else {\n      this._transitionArray = ['translate3d(', 0, 'px, 0, 0)'];\n      this._coordName = 'screenX';\n      this._speedName = 'speedX';\n    }\n    this._animParams = null; // move or not in current time scrolling view\n    this._RafID = null; // ID of request animation frame\n    this._lastPointerPosition = 0; // position of touch pointer, when is touched\n    this._shift = 0; // shift for next requestAnimationFrame tick\n    this._motionType = this._lastMotionType = this._STRINGS.stop;\n    this._isMoved = false;\n    this._tmp = {shift: 0, now: 0, easing: 0, velocity: 0};\n    this._pos = 0;\n    this._root = element;\n    this._wrapper = element.firstElementChild;\n    // Prepare environment\n    validPosition = ['fixed', 'relative', 'absolute'];\n    tmpVar = validPosition.indexOf(window.getComputedStyle(element, null).position);\n    if (tmpVar === -1) {\n      tmpVar = validPosition.indexOf(element.style.position);\n    }\n    if (tmpVar === -1) {\n      this._root.style.position = 'relative';\n    } else {\n      this._root.style.position = validPosition[tmpVar];\n    }\n    this._root.style.overflow = 'hidden';\n    this._wrapper.style.margin = 0;\n    this._wrapper.style.position = 'absolute';\n    this._wrapper.style[this._transitionName] = 'transform 0ms';\n    for (event in this.TRACKING_EVENTS) {\n      if (this.TRACKING_EVENTS.hasOwnProperty(event)) {\n        this._root.addEventListener(this.TRACKING_EVENTS[event], this, false);\n      }\n    }\n    if (this._options.resizeEvent) {\n      window.addEventListener(this.TRACKING_EVENTS.resize, this, false);\n    }\n    // Animation step function\n    this._animationStep = function (timestamp) {\n      if (!scrollView._options.scroll) {\n        return;\n      }\n      scrollView._calculateShift(timestamp);\n      scrollView._pos -= scrollView._shift;\n      // Check bounds\n      if ((scrollView._motionType !== scrollView._STRINGS.tweak) ||\n        (scrollView._motionType !== scrollView._STRINGS.stop)) {\n        if (scrollView._pos < scrollView._min - scrollView._margine) {\n          scrollView._pos = scrollView._min - scrollView._margine;\n          scrollView._motionType = scrollView._STRINGS.checkTweak;\n        }\n        if (scrollView._pos > scrollView._margine + scrollView._max) {\n          scrollView._pos = scrollView._margine + scrollView._max;\n          scrollView._motionType = scrollView._STRINGS.checkTweak;\n        }\n      }\n      if (scrollView._shift !== 0) { // Callbacks\n        if ((!scrollView._isMoved) && !scrollView._options.onScrollBefore(scrollView._shift)) {\n          scrollView._motionType = scrollView._STRINGS.stop;\n        } else {\n          scrollView._isMoved = true;\n          scrollView._options.onScroll(scrollView._shift, scrollView._pos);\n          // Call onScrollTypeChange callback if type of motion was changed\n          if ((scrollView._lastMotionType !== scrollView._motionType) &&\n            (scrollView._motionType !== scrollView._STRINGS.checkTweak) &&\n            (scrollView._motionType !== scrollView._STRINGS.stop)) {\n            scrollView._options.onScrollTypeChange(scrollView._motionType);\n            scrollView._lastMotionType = scrollView._motionType;\n          }\n        }\n      }\n      scrollView._transitionArray[1] = scrollView._pos;\n      // Endpoint round or post next loop\n      if (scrollView._motionType === scrollView._STRINGS.stop) {\n        scrollView._transitionArray[1] = Math.round(scrollView._transitionArray[1]);\n        if (scrollView._isMoved) {\n          scrollView._options.onScrollAfter();\n        }\n        scrollView._isMoved = false;\n      } else {\n        scrollView._RafID = window.requestAnimationFrame(scrollView._animationStep);\n      }\n      scrollView._wrapper.style[scrollView._transformName] = scrollView._transitionArray.join('');\n      scrollView._shift = 0;\n    };\n    // Start\n    this.refresh();\n  }\n\n  ScrollViewJS.prototype = {\n    TRACKING_EVENTS: {\n      resize: 'resize',\n      up: 'pointerup',\n      move: 'pointermove',\n      down: 'pointerdown',\n      chancel: 'pointercancel',\n      fling: 'fling'\n    },\n    _STRINGS: {\n      tweak: 'tweak',\n      checkTweak: 'checkTweak',\n      stop: 'stop',\n      scroll: 'scroll',\n      fling: 'fling',\n      move: 'move'\n    },\n    _transitionName: addVendorPrefix('transition'),\n    _transformName: addVendorPrefix('transform'),\n    _calculateShift: function (now) {\n      // If it first time of RAF loop - save timestamp for calculations\n      if (this._animParams.startTime === null) {\n        this._animParams.startTime = now;\n        this._animParams.lastTime = now;\n      }\n      // Check different types of motion\n      switch (this._motionType) {\n        case this._STRINGS.move:\n          this._shift /= ((this._pos < this._min) || (this._pos > this._max)) ? 3 : 1;\n          break;\n        case this._STRINGS.fling:\n          // Setup shift value & decrease velocity\n          this._shift = this._animParams.velocity * (now - this._animParams.lastTime);\n          this._tmp.velocity = this._animParams.velocity + this._animParams.a * (now - this._animParams.startTime);\n          // Check changing of velocity sign\n          if (this._tmp.velocity / this._animParams.velocity > 0) {\n            this._animParams.velocity = this._tmp.velocity;\n            // Decrease velocity when scroller out of borders\n            if (((this._pos < this._min) && (this._animParams.velocity > 0)) ||\n              ((this._pos > this._max) && (this._animParams.velocity < 0))) {\n              this._animParams.velocity += -this._animParams.velocity * 0.6;\n              if (Math.abs(this._shift) < 0.1) {\n                this._motionType = this._STRINGS.checkTweak;\n              }\n            }\n          } else {\n            this._motionType = this._STRINGS.checkTweak;\n          }\n          break;\n        case this._STRINGS.tweak:\n        case this._STRINGS.scroll:\n          this._tmp.now = Math.ceil(1000 * (now - this._animParams.startTime) / this._animParams.duration) / 1000;\n          this._tmp.easing = this.easeFunc(this._tmp.now);\n          this._tmp.shift = Math.ceil(1000 * this._animParams.shift * this._tmp.easing) / 1000;\n          if (this._animParams.duration !== 0) {\n            this._shift = this._tmp.shift - this._animParams.lastShift;\n          } else {\n            this._shift = this._animParams.shift;\n            this._tmp.now = 1;\n          }\n          if (this._tmp.now >= 1) {\n            if (this._motionType === this._STRINGS.tweak) {\n              this._shift = this._animParams.shift - this._animParams.lastShift;\n              this._motionType = this._STRINGS.stop;\n            } else {\n              this._motionType = this._STRINGS.checkTweak;\n            }\n          }\n          this._animParams.lastShift = this._tmp.shift;\n          break;\n        case this._STRINGS.checkTweak:\n          if (this._pos > this._max) {\n            this._tmp.shift = this._max - this._pos;\n          } else {\n            if (this._pos < this._min) {\n              this._tmp.shift = this._min - this._pos;\n            } else {\n              this._tmp.shift = 0;\n            }\n          }\n          if (this._options.tweak && this._tmp.shift === 0) {\n            if (this._pos < this._max && this._pos > this._min) {\n              this._tmp.shift = this._pos - Math.ceil(1000 * Math.round(this._pos / this._options.tweak) * this._options.tweak) / 1000;\n              this._tmp.shift = -this._tmp.shift;\n            }\n          }\n          this._animParams = {\n            shift: -this._tmp.shift,\n            lastShift: 0,\n            duration: 250,\n            startTime: now,\n            lastTime: null\n          };\n          if (this._tmp.shift !== 0) {\n            this._motionType = this._STRINGS.tweak;\n          } else {\n            this._motionType = this._STRINGS.stop;\n          }\n          break;\n      }\n      this._animParams.lastTime = now;\n      this._shift = (!isNaN(this._shift)) ? this._shift : 0;\n    },\n    _eventPointerDown: function (event) {\n      window.cancelAnimationFrame(this._RafID); // stop any animations\n      this._lastPointerPosition = event[this._coordName]; //save current position for next loop of RAF\n      this._animParams = {}; //start looping by requestAnimationFrame\n      this._motionType = this._STRINGS.move;\n      this._RafID = window.requestAnimationFrame(this._animationStep);\n    },\n    _eventPointerMove: function (event) {\n      this._shift += this._lastPointerPosition - event[this._coordName];\n      this._lastPointerPosition = event[this._coordName];\n    },\n    _eventPointerUp: function (event) {\n      if (this._motionType !== this._STRINGS.fling) {\n        this._motionType = this._STRINGS.checkTweak;\n      }\n      this._eventPointerMove(event);\n    },\n    _eventFling: function (event) {\n      var V = this._options.scroll ? -event[this._speedName] : 0;\n      if (V === 0) {\n        return;\n      }\n      this._animParams = {\n        velocity: V,\n        a: -(V < 0 ? -1 : 1) * 0.00009,\n        startTime: null,\n        lastTime: null\n      };\n      this._motionType = this._STRINGS.fling;\n    },\n    preventDefaultTags: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/,\n    easeFunc: function (time) {\n      return time * (2 - time);\n    },\n    destroy: function () {\n      var event;\n      for (event in this.TRACKING_EVENTS) {\n        if (this.TRACKING_EVENTS.hasOwnProperty(event)) {\n          this._root.removeEventListener(this.TRACKING_EVENTS[event], this);\n        }\n      }\n      window.removeEventListener(this.TRACKING_EVENTS.resize, this);\n      window.cancelAnimationFrame(this._RafID);\n      this._root = null;\n      this._wrapper = null;\n      this._options = null;\n    },\n    refresh: function () {\n      var rootWidth = this._root.offsetWidth, rootHeight = this._root.offsetHeight;\n      window.cancelAnimationFrame(this._RafID);\n      this._motionType = this._STRINGS.stop;\n      if (this._options.direction === 'vertical') {\n        this._min = (rootHeight <= this._wrapper.clientHeight) ?\n        rootHeight - this._wrapper.clientHeight - this._options.marginMAX : 0;\n        this._margine = (this._options.bounds) ? Math.round(rootHeight / 3) : 0;\n      } else {\n        this._min = (rootWidth <= this._wrapper.offsetWidth) ?\n        rootWidth - this._wrapper.clientWidth - this._options.marginMAX : 0;\n        this._margine = (this._options.bounds) ? Math.round(rootWidth / 3) : 0;\n      }\n      this._max = this._options.marginMIN;\n      this._motionType = this._STRINGS.checkTweak; // prepare and start tweak\n      this._animParams = {};\n      this._RafID = window.requestAnimationFrame(this._animationStep);\n    },\n    scroll: function (shift, duration) {\n      var newDuration = duration, newShift, newPos;\n      window.cancelAnimationFrame(this._RafID);\n      this._motionType = this._STRINGS.stop;\n      // check bounds\n      if (shift !== 0) {\n        newPos = this._pos + shift;\n        if (newPos < this._min) {\n          newShift = this._min - this._pos;\n          newDuration = Math.abs(Math.round(duration * newShift / shift));\n          shift = newShift;\n        }\n        if (newPos > this._max) {\n          newShift = this._max - this._pos;\n          newDuration = Math.abs(Math.round(duration * newShift / shift));\n          shift = newShift;\n        }\n      }\n      shift = this._options.scroll ? shift : 0;\n      this._motionType = this._STRINGS.scroll; //start looping by requestAnimationFrame\n      this._animParams = {\n        shift: -shift,\n        lastShift: 0,\n        duration: newDuration,\n        startTime: null,\n        lastTime: null\n      };\n      this._RafID = window.requestAnimationFrame(this._animationStep);\n    },\n    handleEvent: function (event) {\n      var self = this;\n      switch (event.type) {\n        case this.TRACKING_EVENTS.down:\n          this._eventPointerDown(event);\n          break;\n        case this.TRACKING_EVENTS.move:\n          this._eventPointerMove(event);\n          if (this._options.preventMove && !this.preventDefaultTags.test(event.target)) {\n            event.preventDefault();\n          }\n          break;\n        case this.TRACKING_EVENTS.chancel:\n        case this.TRACKING_EVENTS.up:\n          this._eventPointerUp(event);\n          break;\n        case this.TRACKING_EVENTS.fling:\n          this._eventFling(event);\n          break;\n        case this.TRACKING_EVENTS.resize:\n          clearTimeout(this._resizeID);\n          this._resizeID = setTimeout(function () {\n            self.refresh();\n          }, 150);\n          break;\n      }\n    }\n  };\n  ScrollViewJS.ScrollBar = ScrollBar;\n  ScrollViewJS.PointerWrapper = PointerWrapper;\n  return ScrollViewJS;\n}());\n\n  return ScrollViewJS;\n}));\n"],"sourceRoot":"/source/"}